<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ±ØµØ© Ø§Ù„ÙŠÙ…Ù† | Ù‡ÙˆØ§Ù…ÙŠØ± 100/1000</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0046ad; --secondary: #f4f7fa; --text: #333; --accent: #2ecc71; --danger: #e74c3c; }
        body { background-color: var(--secondary); font-family: 'Cairo', sans-serif; margin: 0; padding: 20px; color: var(--text); display: flex; flex-direction: column; align-items: center; }
        
        .container { width: 100%; max-width: 500px; }

        /* ÙƒØ±Øª Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠ */
        .bank-card { background: linear-gradient(135deg, var(--primary), #002a66); color: white; border-radius: 20px; padding: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.15); margin-bottom: 25px; position: relative; overflow: hidden; }
        .bank-card::after { content: ''; position: absolute; top: -50%; right: -50%; width: 100%; height: 200%; background: rgba(255,255,255,0.05); transform: rotate(45deg); }
        
        .bank-card h2 { margin: 0; font-size: 1.1rem; opacity: 0.9; }
        .balance-box { display: flex; justify-content: space-between; margin-top: 20px; position: relative; z-index: 1; }
        .balance-item { text-align: center; }
        .balance-item span { display: block; font-size: 0.8rem; opacity: 0.8; margin-bottom: 5px; }
        .balance-item strong { font-size: 1.5rem; letter-spacing: 1px; }

        /* Ù…Ø¤Ø´Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù„Ø­Ø¸ÙŠ */
        .live-market { background: white; border-radius: 15px; padding: 20px; border-right: 5px solid var(--primary); margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .rate-info p { margin: 0; font-size: 0.9rem; color: #666; }
        .rate-badge { background: #eef2f7; padding: 8px 15px; border-radius: 50px; color: var(--primary); font-weight: bold; font-size: 1.2rem; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ */
        .actions { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .btn-action { width: 100%; padding: 16px; border: none; border-radius: 12px; font-weight: bold; font-size: 1.1rem; cursor: pointer; transition: 0.3s; font-family: 'Cairo'; }
        .btn-trade { background-color: var(--accent); color: white; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); }
        .btn-trade:active { transform: scale(0.95); }
        
        .status-msg { text-align: center; font-size: 0.8rem; color: #888; margin-top: 15px; }
        .pulse { animation: pulse-animation 2s infinite; }
        @keyframes pulse-animation { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="container">
        <div class="bank-card">
            <h2>ğŸ’° Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø§ÙØªØ±Ø§Ø¶ÙŠ)</h2>
            <div class="balance-box">
                <div class="balance-item">
                    <span>Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…</span>
                    <strong id="oldBal">1,500</strong>
                </div>
                <div class="balance-item">
                    <span>Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯</span>
                    <strong id="newBal">15,000</strong>
                </div>
            </div>
        </div>

        <div class="live-market">
            <div class="rate-info">
                <p>ğŸ“Š Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù (Ø§Ù„Ù‚Ø¯ÙŠÙ… : 1000 Ø¬Ø¯ÙŠØ¯)</p>
                <small id="updateStatus" class="pulse">Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨...</small>
            </div>
            <div class="rate-badge" id="rateText">--- : 1000</div>
        </div>

        <div class="actions">
            <button class="btn-action btn-trade" onclick="handleTrade()">ØªÙ†ÙÙŠØ° ØµÙÙ‚Ø© Ø³Ø­Ø¨/Ø¥ÙŠØ¯Ø§Ø¹ âš¡</button>
        </div>

        <p class="status-msg">ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…ÙØ¹Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let oldCurrency = 1500;
        let currentLiveRate = 530; // Ø³Ø¹Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«

        // 1. Ø¯Ø§Ù„Ø© Ø³Ø­Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ (api/rate.js)
        async function updateMarket() {
            try {
                const response = await fetch('/api/rate');
                const data = await response.json();
                if(data.success) {
                    currentLiveRate = parseFloat(data.rate);
                    document.getElementById('rateText').innerText = `${currentLiveRate} : 1000`;
                    document.getElementById('updateStatus').innerText = "ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠ ÙØ¹Ø§Ù„ âœ…";
                    document.getElementById('updateStatus').style.color = "#2ecc71";
                    console.log("ØªÙ… ØªØ­Ø¯ÙŠØ« Ù†Ø¨Ø¶ Ø§Ù„Ø³ÙˆÙ‚ ğŸ“ˆ");
                }
            } catch (e) { 
                document.getElementById('updateStatus').innerText = "Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„...";
                document.getElementById('updateStatus').style.color = "#e74c3c";
            }
        }

        // 2. Ù…Ù†Ø·Ù‚ ØªÙ†ÙÙŠØ° Ø§Ù„ØµÙÙ‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        function handleTrade() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø±Ø¨Ø­ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
            let profit = Math.floor(Math.random() * 20);
            oldCurrency += profit;
            
            document.getElementById('oldBal').innerText = oldCurrency.toLocaleString();
            document.getElementById('newBal').innerText = (oldCurrency * 10).toLocaleString();
            
            alert(`âœ… ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! \n ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ù…Ù† ÙØ§Ø±Ù‚ Ø§Ù„Ø³Ø¹Ø±: ${profit} Ø±ÙŠØ§Ù„ Ù‚Ø¯ÙŠÙ…`);
        }

        // 3. Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 20 Ø«Ø§Ù†ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¯Ù‚Ø©
        setInterval(updateMarket, 20000);
        updateMarket(); // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    </script>
</body>
</html>
